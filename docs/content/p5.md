# Guía Completa del DOM en JavaScript

## ¿Qué es el DOM?

El **DOM** (Document Object Model, o Modelo de Objetos del Documento) es una interfaz de programación proporcionada por los navegadores web que representa la estructura de un documento HTML o XML como un árbol de objetos. Cada elemento, atributo y fragmento de texto en el documento se convierte en un nodo en este árbol, lo que permite a los desarrolladores interactuar con la página web de forma dinámica utilizando lenguajes como JavaScript.

El DOM actúa como un puente entre el código HTML estático y el código JavaScript, permitiendo modificar la estructura, el contenido y el estilo de una página web en tiempo real. Es una representación jerárquica donde:

- **Document**: Es el nodo raíz que representa el documento completo.
- **Elementos**: Cada etiqueta HTML (como `<div>`, `<p>`, `<h1>`) se convierte en un nodo de elemento.
- **Atributos**: Los atributos de las etiquetas (como `id`, `class`) son nodos de atributo.
- **Texto**: El contenido de texto dentro de las etiquetas es un nodo de texto.

### Estructura del DOM

El DOM organiza los elementos de una página web en una estructura de árbol, donde cada nodo tiene una relación jerárquica (padre, hijo, hermano). Por ejemplo, considera el siguiente código HTML:

```html
<!DOCTYPE html>
<html>
<head>
  <title>Ejemplo</title>
</head>
<body>
  <div id="contenedor">
    <h1>Título</h1>
    <p class="texto">Hola, mundo!</p>
  </div>
</body>
</html>
```

La estructura del DOM para este código sería:

```
Document
├── html
    ├── head
    │   └── title
    │       └── "Ejemplo" (nodo de texto)
    └── body
        └── div (id="contenedor")
            ├── h1
            │   └── "Título" (nodo de texto)
            └── p (class="texto")
                └── "Hola, mundo!" (nodo de texto)
```

Cada elemento puede tener hijos, y los nodos de texto son los contenidos visibles de los elementos. Esta estructura permite acceder y manipular cualquier parte del documento de manera programática.

---

## Métodos para Acceder al DOM

JavaScript proporciona varios métodos para seleccionar elementos del DOM. A continuación, se detallan los más comunes: `getElementById`, `querySelector` y `querySelectorAll`.

### `getElementById`

El método `getElementById` permite seleccionar un elemento del DOM por su atributo `id`. Es uno de los métodos más antiguos y específicos para acceder a elementos únicos, ya que el `id` debe ser único en un documento HTML.

**Sintaxis**:
```javascript
document.getElementById('idDelElemento');
```

**Ejemplo**:
```html
<div id="miDiv">Contenido</div>
<script>
  const elemento = document.getElementById('miDiv');
  console.log(elemento); // Devuelve el elemento <div> con id="miDiv"
</script>
```

**Características**:
- Retorna un único elemento (o `null` si no encuentra el `id`).
- Es muy eficiente porque busca específicamente por `id`.
- Solo funciona con el atributo `id`.

### `querySelector`

El método `querySelector` permite seleccionar el **primer elemento** que coincida con un selector CSS proporcionado. Es más flexible que `getElementById` porque puede usar cualquier selector CSS válido (clases, etiquetas, atributos, etc.).

**Sintaxis**:
```javascript
document.querySelector('selectorCSS');
```

**Ejemplo**:
```html
<p class="texto">Primer párrafo</p>
<p class="texto">Segundo párrafo</p>
<script>
  const parrafo = document.querySelector('.texto');
  console.log(parrafo); // Devuelve el primer <p> con class="texto"
</script>
```

**Características**:
- Retorna el primer elemento que coincide con el selector (o `null` si no hay coincidencias).
- Acepta selectores CSS como `.clase`, `#id`, `[atributo]`, `etiqueta`, etc.
- Es más versátil pero puede ser menos eficiente que `getElementById` para IDs.

### `querySelectorAll`

El método `querySelectorAll` devuelve una **lista de nodos** (NodeList) con todos los elementos que coinciden con un selector CSS. Es útil cuando necesitas trabajar con múltiples elementos.

**Sintaxis**:
```javascript
document.querySelectorAll('selectorCSS');
```

**Ejemplo**:
```html
<ul>
  <li class="item">Elemento 1</li>
  <li class="item">Elemento 2</li>
  <li class="item">Elemento 3</li>
</ul>
<script>
  const items = document.querySelectorAll('.item');
  items.forEach(item => console.log(item.textContent));
  // Imprime: "Elemento 1", "Elemento 2", "Elemento 3"
</script>
```

**Características**:
- Retorna una `NodeList` (parecida a un array, pero no es un array).
- Puedes iterar sobre la `NodeList` con métodos como `forEach` o convertirla en un array con `Array.from()`.
- Acepta cualquier selector CSS válido.

---

## Modificación del DOM

Una vez que has seleccionado un elemento, puedes modificar su contenido, estilo o atributos. Los métodos y propiedades más comunes son `innerHTML`, `textContent` y `style`.

### `innerHTML`

La propiedad `innerHTML` permite leer o modificar el **contenido HTML** de un elemento, incluyendo etiquetas HTML. Es poderosa, pero debe usarse con cuidado debido a posibles vulnerabilidades de seguridad (como inyecciones de código).

**Sintaxis**:
```javascript
elemento.innerHTML; // Leer el contenido HTML
elemento.innerHTML = 'nuevo contenido HTML'; // Modificar el contenido
```

**Ejemplo**:
```html
<div id="contenedor">Texto original</div>
<script>
  const contenedor = document.getElementById('contenedor');
  contenedor.innerHTML = '<p>Nuevo <strong>contenido</strong></p>';
  // El div ahora contiene: <p>Nuevo <strong>contenido</strong></p>
</script>
```

**Consideraciones**:
- Permite insertar HTML completo, incluyendo etiquetas.
- Puede ser peligroso si se inserta contenido no confiable (riesgo de XSS).
- Es útil para actualizar grandes bloques de contenido.

### `textContent`

La propiedad `textContent` lee o modifica el **contenido de texto** de un elemento, ignorando cualquier etiqueta HTML. Es más segura que `innerHTML` porque no interpreta el contenido como HTML.

**Sintaxis**:
```javascript
elemento.textContent; // Leer el texto
elemento.textContent = 'nuevo texto'; // Modificar el texto
```

**Ejemplo**:
```html
<div id="contenedor">Texto original</div>
<script>
  const contenedor = document.getElementById('contenedor');
  contenedor.textContent = 'Texto nuevo';
  // El div ahora contiene: Texto nuevo
</script>
```

**Consideraciones**:
- Solo maneja texto plano, ignorando etiquetas HTML.
- Es más seguro que `innerHTML` porque no ejecuta código HTML.
- Ideal para actualizar contenido de texto sin preocupaciones de seguridad.

### `style`

La propiedad `style` permite modificar los estilos CSS de un elemento directamente desde JavaScript. Cada propiedad CSS se accede en formato camelCase (por ejemplo, `backgroundColor` en lugar de `background-color`).

**Sintaxis**:
```javascript
elemento.style.propiedadCSS = 'valor';
```

**Ejemplo**:
```html
<div id="caja">Caja</div>
<script>
  const caja = document.getElementById('caja');
  caja.style.backgroundColor = 'blue';
  caja.style.color = 'white';
  caja.style.padding = '10px';
</script>
```

**Consideraciones**:
- Solo afecta los estilos en línea (inline styles) del elemento.
- No modifica reglas CSS definidas en hojas de estilo externas o internas.
- Es útil para cambios de estilo dinámicos, como en animaciones o interacciones.

---

## Creación y Eliminación de Elementos

El DOM permite crear nuevos elementos, añadirlos a la página y eliminar elementos existentes. Los métodos clave son `createElement`, `appendChild` y `remove`.

### `createElement`

El método `createElement` crea un nuevo elemento HTML especificado por su etiqueta.

**Sintaxis**:
```javascript
document.createElement('etiqueta');
```

**Ejemplo**:
```javascript
const nuevoDiv = document.createElement('div');
nuevoDiv.textContent = 'Nuevo elemento';
```

**Características**:
- Crea un elemento en memoria, pero no lo añade al DOM hasta que se use un método como `appendChild`.
- La etiqueta debe ser una cadena válida (como `'div'`, `'p'`, `'span'`).

### `appendChild`

El método `appendChild` agrega un nodo (como un elemento creado con `createElement`) como hijo de otro elemento en el DOM.

**Sintaxis**:
```javascript
padre.appendChild(hijo);
```

**Ejemplo**:
```html
<div id="contenedor"></div>
<script>
  const contenedor = document.getElementById('contenedor');
  const nuevoParrafo = document.createElement('p');
  nuevoParrafo.textContent = 'Párrafo dinámico';
  contenedor.appendChild(nuevoParrafo);
  // El div ahora contiene: <p>Párrafo dinámico</p>
</script>
```

**Características**:
- Añade el elemento como el último hijo del elemento padre.
- Si el elemento ya existe en el DOM, lo mueve a la nueva ubicación.

### `remove`

El método `remove` elimina un elemento del DOM.

**Sintaxis**:
```javascript
elemento.remove();
```

**Ejemplo**:
```html
<div id="contenedor">
  <p id="parrafo">Texto a eliminar</p>
</div>
<script>
  const parrafo = document.getElementById('parrafo');
  parrafo.remove();
  // El párrafo ya no está en el DOM
</script>
```

**Consideraciones**:
- Elimina el elemento y todos sus hijos.
- Es compatible con navegadores modernos; en navegadores antiguos, se usaba `parentNode.removeChild(elemento)`.

---

## Ejemplo Completo

A continuación, un ejemplo que combina los conceptos explicados:

```html
<!DOCTYPE html>
<html>
<head>
  <title>Ejemplo DOM</title>
</head>
<body>
  <div id="contenedor">
    <p class="texto">Texto inicial</p>
  </div>
  <button onclick="modificarDOM()">Modificar</button>
  <script>
    function modificarDOM() {
      // Seleccionar elementos
      const contenedor = document.getElementById('contenedor');
      const parrafos = document.querySelectorAll('.texto');

      // Modificar contenido
      parrafos.forEach(p => {
        p.textContent = 'Texto modificado';
        p.style.color = 'red';
      });

      // Crear y añadir un nuevo elemento
      const nuevoParrafo = document.createElement('p');
      nuevoParrafo.innerHTML = '<strong>Nuevo párrafo</strong>';
      contenedor.appendChild(nuevoParrafo);

      // Eliminar el primer párrafo
      if (parrafos.length > 0) {
        parrafos[0].remove();
      }
    }
  </script>
</body>
</html>
```

**Explicación del ejemplo**:
1. Se selecciona el contenedor con `getElementById` y los párrafos con `querySelectorAll`.
2. Se modifica el texto y el estilo de los párrafos con `textContent` y `style`.
3. Se crea un nuevo párrafo con `createElement` y se añade con `appendChild`.
4. Se elimina el primer párrafo con `remove`.

---

## Buenas Prácticas

- **Usa `textContent` en lugar de `innerHTML`** cuando solo necesites modificar texto, para evitar riesgos de seguridad.
- **Optimiza selectores**: Usa `getElementById` para IDs por su eficiencia.
- **Valida la existencia de elementos**: Verifica si un elemento existe (`if (elemento) {...}`) antes de manipularlo.
- **Evita manipular el DOM excesivamente**: Las operaciones en el DOM pueden ser costosas en términos de rendimiento; agrupa cambios cuando sea posible.

---

## Actividad Práctica: Manipulación del DOM con JavaScript

## Objetivo
Esta actividad tiene como propósito que los estudiantes practiquen los conceptos del **Document Object Model (DOM)** en JavaScript, incluyendo la selección, modificación, creación y eliminación de elementos en una página web. Los estudiantes aplicarán los métodos `getElementById`, `querySelector`, `querySelectorAll`, `innerHTML`, `textContent`, `style`, `createElement`, `appendChild` y `remove` en un ejercicio interactivo.

---

## Instrucciones Generales

1. **Entorno**: Usa un editor de código (como VS Code) y un navegador web para probar tu código.
2. **Archivo base**: Crea un archivo HTML con la estructura inicial proporcionada más abajo.
3. **Tareas**: Completa las tareas descritas, escribiendo el código JavaScript necesario para manipular el DOM.
4. **Validación**: Prueba tu código en el navegador y verifica que cumpla con los requisitos de cada tarea.
5. **Entrega**: Comparte el archivo HTML final con el código JavaScript implementado (puedes usar un enlace a un repositorio o un archivo comprimido).

---

## Archivo Base (HTML)

Copia el siguiente código HTML en un archivo llamado `actividad-dom.html` para usar como base:

```html
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Actividad DOM</title>
  <style>
    .tarea {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 10px 0;
    }
    .item-lista {
      margin: 5px 0;
    }
    button {
      padding: 5px 10px;
      margin: 5px;
    }
  </style>
</head>
<body>
  <h1>Actividad Práctica: Manipulación del DOM</h1>

  <div id="contenedor-tareas">
    <!-- Tarea 1: Modificar texto -->
    <div class="tarea" id="tarea1">
      <h2>Tarea 1: Modificar Texto</h2>
      <p id="texto-inicial">Este es un texto inicial</p>
      <button onclick="modificarTexto()">Cambiar Texto</button>
    </div>

    <!-- Tarea 2: Cambiar estilos -->
    <div class="tarea" id="tarea2">
      <h2>Tarea 2: Cambiar Estilos</h2>
      <div id="caja-estilo">Caja con estilo inicial</div>
      <button onclick="cambiarEstilo()">Cambiar Estilo</button>
    </div>

    <!-- Tarea 3: Añadir elementos -->
    <div class="tarea" id="tarea3">
      <h2>Tarea 3: Añadir Elementos</h2>
      <ul id="lista-dinamica">
        <li class="item-lista">Elemento 1</li>
        <li class="item-lista">Elemento 2</li>
      </ul>
      <button onclick="agregarElemento()">Añadir Elemento</button>
    </div>

    <!-- Tarea 4: Eliminar elementos -->
    <div class="tarea" id="tarea4">
      <h2>Tarea 4: Eliminar Elementos</h2>
      <ul id="lista-eliminar">
        <li class="item-lista">Elemento A</li>
        <li class="item-lista">Elemento B</li>
        <li class="item-lista">Elemento C</li>
      </ul>
      <button onclick="eliminarElemento()">Eliminar Último Elemento</button>
    </div>
  </div>

  <script>
    // Escribe tu código JavaScript aquí
  </script>
</body>
</html>
```

---

## Tareas

### Tarea 1: Modificar Texto
**Objetivo**: Usar `getElementById` y `textContent` para cambiar el contenido de un elemento.

1. Selecciona el elemento con `id="texto-inicial"` usando `getElementById`.
2. Implementa la función `modificarTexto()` para que, al hacer clic en el botón "Cambiar Texto", el contenido del párrafo cambie a: **"¡Texto modificado con éxito!"**.
3. Usa `textContent` para realizar el cambio (no uses `innerHTML`).

**Pista**:
- Usa `document.getElementById('texto-inicial')` para seleccionar el elemento.
- Asigna el nuevo texto con `elemento.textContent = 'nuevo texto'`.

### Tarea 2: Cambiar Estilos
**Objetivo**: Usar `querySelector` y la propiedad `style` para modificar los estilos de un elemento.

1. Selecciona el elemento con `id="caja-estilo"` usando `querySelector`.
2. Implementa la función `cambiarEstilo()` para que, al hacer clic en el botón "Cambiar Estilo", se apliquen los siguientes estilos:
   - Fondo: azul (`backgroundColor: 'blue'`).
   - Color de texto: blanco (`color: 'white'`).
   - Relleno: 15px (`padding: '15px'`).
   - Borde: 2px sólido negro (`border: '2px solid black'`).

**Pista**:
- Usa `document.querySelector('#caja-estilo')` para seleccionar el elemento.
- Modifica las propiedades de estilo con `elemento.style.propiedad = 'valor'`.

### Tarea 3: Añadir Elementos
**Objetivo**: Usar `createElement`, `textContent` y `appendChild` para añadir un nuevo elemento a una lista.

1. Selecciona la lista con `id="lista-dinamica"` usando `querySelector`.
2. Implementa la función `agregarElemento()` para que, al hacer clic en el botón "Añadir Elemento":
   - Cree un nuevo elemento `<li>` con `createElement`.
   - Establezca su contenido de texto a **"Elemento X"** (donde X es el número del nuevo elemento, empezando desde 3).
   - Añada la clase `item-lista` al nuevo elemento usando `classList.add('item-lista')`.
   - Añada el nuevo elemento a la lista con `appendChild`.

**Pista**:
- Usa `document.querySelectorAll('.item-lista')` para contar los elementos existentes y determinar el número del nuevo elemento.
- Crea el elemento con `document.createElement('li')`.
- Añade el elemento con `lista.appendChild(nuevoElemento)`.

### Tarea 4: Eliminar Elementos
**Objetivo**: Usar `querySelectorAll` y `remove` para eliminar un elemento de una lista.

1. Selecciona todos los elementos `<li>` dentro de la lista con `id="lista-eliminar"` usando `querySelectorAll`.
2. Implementa la función `eliminarElemento()` para que, al hacer clic en el botón "Eliminar Último Elemento":
   - Elimine el último `<li>` de la lista.
   - Si no hay elementos en la lista, muestra una alerta con el mensaje: **"No hay más elementos para eliminar"**.

**Pista**:
- Usa `document.querySelectorAll('#lista-eliminar li')` para obtener los elementos.
- Accede al último elemento con `elementos[elementos.length - 1]`.
- Usa `elemento.remove()` para eliminar el elemento.

---
